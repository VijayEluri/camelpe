/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
create table "PUBLIC"."DBMAINTAIN_SCRIPTS" ( FILE_NAME VARCHAR(150), VERSION VARCHAR(25), FILE_LAST_MODIFIED_AT BIGINT, CHECKSUM VARCHAR(50), EXECUTED_AT VARCHAR(20), SUCCEEDED BIGINT )
INSERT INTO "DBMAINTAIN_SCRIPTS" VALUES('001_database_schema.sql','1',1275168074921,'03ef49de8bea5c1bb71226189e67d07c','2010-05-31 21:58:55',0)
CREATE SCHEMA ITEM AUTHORIZATION DBA
SET SCHEMA ITEM
SET SCHEMA PUBLIC
SET SCHEMA PUBLIC
create table ITEM.ITEM (\u000a        id bigint not null,\u000a        META_VERSION integer,\u000a        AUDIT_CREATED_BY varchar(15) not null,\u000a        AUDIT_CREATED_ON timestamp not null,\u000a        AUDIT_LAST_UPDATED_BY varchar(15) not null,\u000a        AUDIT_LAST_UPDATED_ON timestamp not null,\u000a        DESCRIPTION varchar(2000) not null,\u000a        ITEM_NUMBER varchar(30) not null,\u000a        NAME varchar(60) not null,\u000a        primary key (id),\u000a        unique (ITEM_NUMBER),\u000a        unique (NAME)\u000a    )
create table ITEM.ITEM_ITEM_OPTION_ASSOC (\u000a        ID_ITEM bigint not null,\u000a        ID_ITEM_OPTION bigint not null,\u000a        primary key (ID_ITEM, ID_ITEM_OPTION)\u000a    )
create table ITEM.ITEM_OPTION (\u000a        id bigint not null,\u000a        META_VERSION integer,\u000a        DESCRIPTION varchar(200) not null,\u000a        NAME varchar(60) not null,\u000a        TYPE varchar(30) not null,\u000a        primary key (id),\u000a        unique (NAME)\u000a    )
create table ITEM.ITEM_OPTION_SPECIFICATION (\u000a        id bigint not null,\u000a        META_VERSION integer,\u000a        NAME varchar(200) not null,\u000a        ID_ITEM_SPECIFICATION bigint not null,\u000a        ID_ITEM_OPTION bigint not null,\u000a        primary key (id)\u000a    )
create table ITEM.ITEM_SPECIFICATION (\u000a        id bigint not null,\u000a        META_VERSION integer,\u000a        AUDIT_CREATED_BY varchar(15) not null,\u000a        AUDIT_CREATED_ON timestamp not null,\u000a        AUDIT_LAST_UPDATED_BY varchar(15) not null,\u000a        AUDIT_LAST_UPDATED_ON timestamp not null,\u000a        ITEM_SPECIFICATION_NUMBER varchar(30) not null,\u000a        ID_ITEM bigint not null,\u000a        primary key (id),\u000a        unique (ITEM_SPECIFICATION_NUMBER)\u000a    )
create table ITEM.OFFER (\u000a        id bigint not null,\u000a        META_VERSION integer,\u000a        AUDIT_CREATED_BY varchar(15) not null,\u000a        AUDIT_CREATED_ON timestamp not null,\u000a        AUDIT_LAST_UPDATED_BY varchar(15) not null,\u000a        AUDIT_LAST_UPDATED_ON timestamp not null,\u000a        END_DATE date,\u000a        NAME varchar(60) not null,\u000a        PRICE_AMOUNT numeric,\u000a        PRICE_CURRENCY varchar(255),\u000a        START_DATE date not null,\u000a        ID_ITEM bigint not null,\u000a        primary key (id),\u000a        unique (NAME)\u000a    )
create table ITEM.PROMOTION (\u000a        id bigint not null,\u000a        META_VERSION integer,\u000a        AUDIT_CREATED_BY varchar(15) not null,\u000a        AUDIT_CREATED_ON timestamp not null,\u000a        AUDIT_LAST_UPDATED_BY varchar(15) not null,\u000a        AUDIT_LAST_UPDATED_ON timestamp not null,\u000a        END_DATE date,\u000a        NAME varchar(60) not null,\u000a        PROMOTIONAL_TEXT varchar(2000) not null,\u000a        START_DATE date not null,\u000a        ID_OFFER bigint not null,\u000a        primary key (id),\u000a        unique (ID_OFFER),\u000a        unique (NAME)\u000a    )
alter table ITEM.ITEM_ITEM_OPTION_ASSOC \u000a        add constraint FK_ITEMOPTION_ITEM \u000a        foreign key (ID_ITEM_OPTION) \u000a        references ITEM.ITEM_OPTION
alter table ITEM.ITEM_ITEM_OPTION_ASSOC \u000a        add constraint FK_ITEM_ITEMOPTION \u000a        foreign key (ID_ITEM) \u000a        references ITEM.ITEM
alter table ITEM.ITEM_OPTION_SPECIFICATION \u000a        add constraint FK_ITEMOPTIONSPEC_ITEMOPTION \u000a        foreign key (ID_ITEM_OPTION) \u000a        references ITEM.ITEM_OPTION
alter table ITEM.ITEM_OPTION_SPECIFICATION \u000a        add constraint FK_ITEMOPTIONSPEC_ITEMSPEC \u000a        foreign key (ID_ITEM_SPECIFICATION) \u000a        references ITEM.ITEM_SPECIFICATION
alter table ITEM.ITEM_SPECIFICATION \u000a        add constraint FK_ITEMSPEC_ITEM \u000a        foreign key (ID_ITEM) \u000a        references ITEM.ITEM \u000a        on delete cascade
alter table ITEM.OFFER \u000a        add constraint FK_OFFER_ITEM \u000a        foreign key (ID_ITEM) \u000a        references ITEM.ITEM
alter table ITEM.PROMOTION \u000a        add constraint FK_PROMOTION_OFFER \u000a        foreign key (ID_OFFER) \u000a        references ITEM.OFFER
create sequence ITEM.ID_SEQ_ITEM
create sequence ITEM.ID_SEQ_ITEM_OPTION
create sequence ITEM.ID_SEQ_ITEM_OPTION_SPEC
create sequence ITEM.ID_SEQ_ITEM_SPEC
create sequence ITEM.ID_SEQ_OFFER
create sequence ITEM.ID_SEQ_PROMOTION
SET AUTOCOMMIT FALSE
DELETE FROM "DBMAINTAIN_SCRIPTS" WHERE FILE_NAME='001_database_schema.sql' AND VERSION='1' AND FILE_LAST_MODIFIED_AT=1275168074921 AND CHECKSUM='03ef49de8bea5c1bb71226189e67d07c' AND EXECUTED_AT='2010-05-31 21:58:55' AND SUCCEEDED=0
INSERT INTO "DBMAINTAIN_SCRIPTS" VALUES('001_database_schema.sql','1',1275168074921,'03ef49de8bea5c1bb71226189e67d07c','2010-05-31 21:58:55',1)
SET AUTOCOMMIT TRUE
alter table "ITEM"."ITEM_OPTION_SPECIFICATION" drop constraint "FK_ITEMOPTIONSPEC_ITEMOPTION"
alter table "ITEM"."ITEM_OPTION_SPECIFICATION" drop constraint "FK_ITEMOPTIONSPEC_ITEMSPEC"
alter table "ITEM"."ITEM_ITEM_OPTION_ASSOC" drop constraint "FK_ITEMOPTION_ITEM"
alter table "ITEM"."ITEM_SPECIFICATION" drop constraint "FK_ITEMSPEC_ITEM"
alter table "ITEM"."ITEM_ITEM_OPTION_ASSOC" drop constraint "FK_ITEM_ITEMOPTION"
alter table "ITEM"."OFFER" drop constraint "FK_OFFER_ITEM"
alter table "ITEM"."PROMOTION" drop constraint "FK_PROMOTION_OFFER"
alter table "ITEM"."ITEM" drop constraint "SYS_CT_56"
alter table "ITEM"."ITEM" drop constraint "SYS_CT_57"
alter table "ITEM"."ITEM_OPTION" drop constraint "SYS_CT_64"
alter table "ITEM"."ITEM_SPECIFICATION" drop constraint "SYS_CT_70"
alter table "ITEM"."OFFER" drop constraint "SYS_CT_74"
alter table "ITEM"."PROMOTION" drop constraint "SYS_CT_78"
alter table "ITEM"."PROMOTION" drop constraint "SYS_CT_79"
alter table "ITEM"."ITEM" alter column "AUDIT_CREATED_BY" set null
alter table "ITEM"."ITEM" alter column "AUDIT_CREATED_ON" set null
alter table "ITEM"."ITEM" alter column "AUDIT_LAST_UPDATED_BY" set null
alter table "ITEM"."ITEM" alter column "AUDIT_LAST_UPDATED_ON" set null
alter table "ITEM"."ITEM" alter column "DESCRIPTION" set null
alter table "ITEM"."ITEM" alter column "ITEM_NUMBER" set null
alter table "ITEM"."ITEM" alter column "NAME" set null
alter table "ITEM"."ITEM_OPTION" alter column "DESCRIPTION" set null
alter table "ITEM"."ITEM_OPTION" alter column "NAME" set null
alter table "ITEM"."ITEM_OPTION" alter column "TYPE" set null
alter table "ITEM"."ITEM_OPTION_SPECIFICATION" alter column "NAME" set null
alter table "ITEM"."ITEM_OPTION_SPECIFICATION" alter column "ID_ITEM_SPECIFICATION" set null
alter table "ITEM"."ITEM_OPTION_SPECIFICATION" alter column "ID_ITEM_OPTION" set null
alter table "ITEM"."ITEM_SPECIFICATION" alter column "AUDIT_CREATED_BY" set null
alter table "ITEM"."ITEM_SPECIFICATION" alter column "AUDIT_CREATED_ON" set null
alter table "ITEM"."ITEM_SPECIFICATION" alter column "AUDIT_LAST_UPDATED_BY" set null
alter table "ITEM"."ITEM_SPECIFICATION" alter column "AUDIT_LAST_UPDATED_ON" set null
alter table "ITEM"."ITEM_SPECIFICATION" alter column "ITEM_SPECIFICATION_NUMBER" set null
alter table "ITEM"."ITEM_SPECIFICATION" alter column "ID_ITEM" set null
alter table "ITEM"."OFFER" alter column "AUDIT_CREATED_BY" set null
alter table "ITEM"."OFFER" alter column "AUDIT_CREATED_ON" set null
alter table "ITEM"."OFFER" alter column "AUDIT_LAST_UPDATED_BY" set null
alter table "ITEM"."OFFER" alter column "AUDIT_LAST_UPDATED_ON" set null
alter table "ITEM"."OFFER" alter column "NAME" set null
